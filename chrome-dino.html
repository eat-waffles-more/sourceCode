<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
        <title>T-Rex Run! - Chrome Dinosaur Game</title>
		<meta name="description" content="Chrome Dino (also known as T-Rex Game, or the NO INTERNET GAME) is one of the hidden Google games which originally can only be activated when you are offline with Chrome browser. Today this game can be played unblocked. Want to hack it? Just turn on the 'bot mode' option.">
		<style>::-webkit-scrollbar-thumb{background-color:#aaa;height:50px;outline-offset:-2px;outline:2px solid #fff;-webkit-border-radius:4px;border:2px solid #fff}::-webkit-scrollbar-thumb:hover{background-color:#fb4446;height:50px;-webkit-border-radius:4px}::-webkit-scrollbar{width:8px;height:8px}::-webkit-scrollbar-track-piece{background-color:#fff;-webkit-border-radius:0}#hint{position:absolute;z-index:100;top:40px;width:100%}#hintc{font-family:raleway,sans-serif;width:190px;width:fit-content;margin:auto;font-size:14px;border-width:1px;padding:6px 14px;background-color:#f9edbe;border-color:#f0c36d;color:#333;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px;-webkit-box-shadow:0 2px 4px rgba(0,0,0,.2);-moz-box-shadow:0 2px 4px rgba(0,0,0,.2);box-shadow:0 2px 4px rgba(0,0,0,.2);-webkit-transition:all 0 linear 1s,opacity 1s;-moz-transition:all 0 linear 1s,opacity 1s;-ms-transition:all 0 linear 1s,opacity 1s;-o-transition:all 0 linear 1s,opacity 1s;transition:all 0 linear 1s,opacity 1s}.category{display:flex;justify-content:center}.category_ttp{color:#555;margin:10px 8px 0;position:relative;float:left;text-align:center}.category_ttp .tooltip_ext{font-family:raleway,sans-serif;background:#262626;box-shadow:2px 2px 0 #ccc;border-radius:5px;-moz-border-radius:5px;-webkit-border-radius:5px;-o-border-radius:5px;bottom:100%;color:#fff;margin-bottom:15px;opacity:0;pointer-events:none;-webkit-transform:translateY(10px);-moz-transform:translateY(10px);-ms-transform:translateY(10px);-o-transform:translateY(10px);transform:translateY(10px);-webkit-transition:all .25s ease-out;-moz-transition:all .25s ease-out;-ms-transition:all .25s ease-out;-o-transition:all .25s ease-out;transition:all .25s ease-out;display:block;position:absolute;width:130%;left:-15%;padding:10px 0;word-wrap:break-word;font-size:16px}.category_ttp .tooltip_ext:before{bottom:-20px;content:" ";display:block;height:20px;left:0;position:absolute}.category_ttp .tooltip_ext:after{border-left:solid transparent 10px;border-right:solid transparent 10px;border-top:solid #262626 10px;bottom:-10px;content:" ";height:0;left:50%;margin-left:-13px;position:absolute;width:0}.category_ttp:hover .tooltip_ext{opacity:1;-webkit-transform:translateY(0px);-moz-transform:translateY(0px);-ms-transform:translateY(0px);-o-transform:translateY(0px);transform:translateY(0px)}.category_ttp:hover div.nav_icon span{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);-ms-transform:rotate(360deg)}.category a{color:#fff;text-decoration:none}.category_ttp b{font-size:15px;font-family:raleway,sans-serif}.nav_icon{-webkit-transform:scale(.5)!important;-moz-transform:scale(.5)!important;-ms-transform:scale(.5)!important;-o-transform:scale(.5)!important;transform:scale(.5)!important;filter:progid:DXImageTransform.Microsoft.Matrix(M11=0.9999619230641713,M12=-0.008726535498373935,M21=0.008726535498373935,M22=0.9999619230641713,SizingMethod='auto expand')!important;width:100px;height:80px}â€‹ .nav_icon img{left:13px;top:14px;position:absolute;border-radius:300px;-moz-border-radius:300px;-webkit-border-radius:300px}.nav_icon span{display:block;background:url(https://cdn.elg.im/nav_logo.png) no-repeat;width:96px;height:96px;-webkit-transition:all .5s ease-in-out;-moz-transition:all .5s ease-in-out;-o-transition:all .5s ease-in-out;-ms-transition:all .5s ease-in-out}.nav_str{display:block;height:82px;margin:0;overflow:hidden;position:absolute;width:82px;left:7px;top:7px}.nav_icon a{background:url(https://cdn.elg.im/nav_logo.png) no-repeat;width:82px;height:82px}.nav_icon span.underwater_str{background-position:0 -1692px}#nav_elgoog{background-position:0 -665px}.nav_icon span.elgoog_str{background-position:0 -564px}#nav_underwater{background-position:0 -1793px}.nav_icon span.gravity_str{background-position:0 -188px}#nav_gravity{background-position:0 -289px}.nav_icon span.pacman_str{background-position:0 -1128px}#nav_pacman{background-position:0 -1229px}.nav_icon span.trex_str{background-position:0 -1504px}#nav_trex{background-position:0 -1605px}.nav_icon span.guitar_str{background-position:0 -376px}#nav_guitar{background-position:0 -477px}.nav_icon span.snake_str{background-position:0 -1316px}#nav_snake{background-position:0 -1417px}.nav_icon span.bwp_str{background-position:0 -752px}#nav_bwp{background-position:0 -853px}.nav_icon span.iploc_str{background-position:0 -940px}#nav_iploc{background-position:0 -1041px}.nav_icon span.gnib_str{background-position:0 0}#nav_gnib{background-position:0 -101px}.nav-icon{background:transparent url(https://cdn.elg.im/arrows.png) 0 0 no-repeat;height:60px;width:31px}#next-link>.nav-icon{background-position:-31px 0}#prev-link,#next-link{width:31px;margin-top:-30px;position:fixed;top:50%;z-index:100}#prev-link{right:0}#next-link{left:0}#prev-link>.nav-icon:active,#prev-link>.nav-icon:hover{background-position:0 -120px}#next-link>.nav-icon:active,#next-link>.nav-icon:hover{background-position:-31px -120px}.ep-sidetools{position:absolute;z-index:9;top:40%}.ep-lefttools{right:0}.ep-righttools{left:0}.ep-nav-pc{opacity:1;background:rgba(0,0,0,.8);background:#303030\9;text-decoration:none}.ep-nav{position:fixed;cursor:pointer;padding:12px 0;opacity:.88;text-align:left;border-radius:3px;-webkit-border-radius:3px;-moz-border-radius:3px;-ms-border-radius:3px;-o-border-radius:3px;font-family:raleway,sans-serif;font-size:13px}.ep-nav-left{left:-5px}.ep-nav-right{right:0;padding-right:2px}.ep-nav i{width:60px;height:48px;display:block;background:url(https://cdn.elg.im/images/nav_icon.png) no-repeat 16px 0;margin:13px 0}.ep-nav-left i{float:left}.ep-nav-right i{background-position:10px -48px;float:right}.ep-nav label{color:#9b9b9b;font-size:14px;margin-bottom:2px}.ep-nav label,.ep-nav span{display:none}.ep-nav span{margin-top:6px;color:#f6f6f6;font-size:16px;height:48px;line-height:24px;overflow:hidden}.ep-nav label,.ep-nav span{display:none}.ep-nav-pc.ep-nav-left:hover{padding-right:18px}.ep-nav-pc.ep-nav-right:hover{padding-left:18px}.ep-nav-pc:hover{opacity:1;background:rgba(0,0,0,.8);background:#303030\9;text-decoration:none;width:295px}a:hover{text-decoration:none}.ep-nav-pc:hover label,.ep-nav-pc:hover span{display:block}a#text_nav_link{text-align:center;text-decoration:none;color:#fff}.text_nav{font-weight:700;pointer-events:none;padding-top:20px;text-align:center}.text_nav_link{display:inline-block;text-decoration:none;border:1px solid #263238;color:#263238;pointer-events:auto;line-height:30px;position:relative;padding:0 15px;box-sizing:border-box;margin:0;user-select:none;overflow:hidden;border-radius:50px;width:185px}.text_nav_link::before{content:attr(data-hover);background-color:#263238;color:#fff;position:absolute;top:100%;bottom:0;left:0;transition:all 300ms cubic-bezier(.19,1,.56,1);right:0}.text_nav_link:hover::before{top:0}.text_nav1{color:#4285f4;border-color:#4285f4}.text_nav2{color:#fbbc05;border-color:#fbbc05}.text_nav3{color:#ea4335;border-color:#ea4335}.text_nav4{color:#34a853;border-color:#34a853}.text_nav1::before{background-color:#4285f4}.text_nav2::before{background-color:#fbbc05}.text_nav3::before{background-color:#ea4335}.text_nav4::before{background-color:#34a853}#disclaimer p,#disclaimer a{font-family:raleway,sans-serif!important}#disclaimer a{color:#353535;text-decoration:underline}#ad7280{width:728px;min-height:90px}#ad3000,#ad3001,#ad3002{width:300px;min-height:90px}#ad4000{width:400px;min-height:90px}#taboola-mid-article-thumbnails{width:300px}.trc_desktop_disclosure_link,.trc_mobile_disclosure_link{display:none!important}.trc_rbox_header_span{display:none!important}.logoDiv a span{font-weight:400!important;font-family:raleway,sans-serif;!important;color:#9ea0a3!important}.video-label-box span,.trc-main-label span{text-align:center!important;font-family:raleway,sans-serif!important}.thumbnails-468 .trc_spotlight_item{margin-top:1px!important;width:97.5%!important;box-shadow:2px 2px 3px 0 rgba(0,0,0,.25)!important;-moz-box-shadow:2px 2px 3px 0 rgba(0,0,0,.25)!important;-webkit-box-shadow:2px 2px 3px 0 rgba(0,0,0,.25)!important;-o-box-shadow:2px 2px 3px 0 rgba(0,0,0,.25)!important;border-radius:5px!important;overflow:hidden!important;background:#fff!important}.thumbnails-468 .video-label-box span,.thumbnails-468 .trc-main-label span{padding-top:20px!important}.thumbnails-468 .video-label{font-size:1.2em!important}.thumbnails-300 .trc_spotlight_item{width:97.5%!important;-moz-box-shadow:0 2px 3px 0 rgba(0,0,0,.25)!important;-webkit-box-shadow:0 2px 3px 0 rgba(0,0,0,.25)!important;-o-box-shadow:0 2px 3px 0 rgba(0,0,0,.25)!important;border-radius:5px!important;overflow:hidden!important;background:#fff!important;margin-left:7px}.thumbnails-300 .video-label-box{margin:10px!important}.thumbnails-300 .video-label{font-size:1.2em!important}.thumbnails-300 .branding{padding-top:10px!important}.thumbnails-728 .thumbBlock{border-radius:7px!important}</style>
        <style>body{background-color:#f7f7f7;font-family:'Raleway',sans-serif}header{padding-top:1em;text-align:center;max-width:800px;margin:auto}h1{font-size:2em;font-weight:bold}p{line-height:1.75em;font-size:1em}#hint{position:relative;top:0;display:none}#hintc{width:300px}#offline-resources{display:none}.interstitial-wrapper{color:#2b2b2b;font-size:1em;line-height:1.55;margin:0 auto;max-width:600px;padding-top:100px;width:100%}.runner-container{direction:ltr;height:150px;max-width:600px;overflow:hidden;position:absolute;top:220px;width:44px}.runner-canvas{height:150px;max-width:600px;opacity:1;overflow:hidden;position:absolute;top:0;z-index:2}.controller{background:rgba(247,247,247,.1);height:100vh;left:0;position:absolute;top:0;width:100vw;}#adBanner,.criBanner{padding-top:1em;margin:auto;width:728px;min-height:90px}#adRect,.criRect{padding-top:0.5em;margin:auto;z-index:+1;min-height:90px}.thumbnails-468 .trc_spotlight_item{background: #f0f0f0 !important;} #offline-resources{display:none}@media(max-height:350px){.interstitial-wrapper{margin-top:5%}}@media(min-width:420px) and (max-width:736px) and (min-height:240px) and (max-height:420px) and (orientation:landscape){.ep-sidetools{top:20%}.interstitial-wrapper{margin-bottom:100px}}@media(max-width:360px) and (max-height:480px){.ep-sidetools{top:75%}.interstitial-wrapper{padding-top:60px}.runner-container{top:8px}}@media(min-height:240px) and (orientation:landscape){.interstitial-wrapper{margin-bottom:90px}}@media(max-height:320px) and (orientation:landscape){.runner-container{top:10px}}@media(max-width:240px){.interstitial-wrapper{overflow:inherit;padding:0 8px}}#options{width:130px;margin:5em auto auto auto}#botStatus{position:absolute;z-index:2}#options span{margin-left:25px}.ep-sidetools{top:60%}</style>
    </head>
    <body>
		<header>
			<h1>T-Rex, Run!</h1>
<br>Press <strong>Space</strong> key or <strong>Tap</strong> the T-rex to jump.</p>
      <div id="hint">
        <div id="hintc">Please play this game with Chrome or Firefox:)</div>
      </div>
		</header>
        <div id="main-frame-error" class="interstitial-wrapper" jstcache="0">
			<img class="icon icon-offline" jseval="updateIconClass(this.classList, iconClass)" jstcache="1" style="visibility: hidden;">
        </div>
		<div id="options">
          <input type="checkbox" id="botStatus" />
          <span>Activate Bot?</span>
        </div>
        <div id="offline-resources" jstcache="0">
            <div id="offline-resources-1x" jstcache="0">
                <img id="1x-obstacle-large" src="https://24glo.com/img/game/dino/1x-obstacle-large.png" jstcache="0">
                <img id="1x-obstacle-small" src="https://24glo.com/img/game/dino/1x-obstacle-small.png" jstcache="0">
                <img id="1x-cloud" src="https://24glo.com/img/game/dino/1x-cloud.png" jstcache="0">
                <img id="1x-text" src="https://24glo.com/img/game/dino/1x-text.png" jstcache="0">
                <img id="1x-horizon" src="https://24glo.com/img/game/dino/1x-horizon.png" jstcache="0">
                <img id="1x-trex" src="https://24glo.com/img/game/dino/1x-trex.png" jstcache="0">
                <img id="1x-restart" src="https://24glo.com/img/game/dino/1x-restart.png" jstcache="0">
            </div>
            <div id="offline-resources-2x" jstcache="0">
                <img id="2x-obstacle-large" src="https://24glo.com/img/game/dino/2x-obstacle-large.png" jstcache="0">
                <img id="2x-obstacle-small" src="https://24glo.com/img/game/dino/2x-obstacle-small.png" jstcache="0">
                <img id="2x-cloud" src="https://24glo.com/img/game/dino/2x-cloud.png" jstcache="0">
                <img id="2x-text" src="https://24glo.com/img/game/dino/2x-text.png" jstcache="0">
                <img id="2x-horizon" src="https://24glo.com/img/game/dino/2x-horizon.png" jstcache="0">
                <img id="2x-trex" src="https://24glo.com/img/game/dino/2x-trex.png" jstcache="0">
                <img id="2x-restart" src="https://24glo.com/img/game/dino/2x-restart.png" jstcache="0">
            </div>
        </div>
        <div id="audio-resources" jstcache="0">
			<audio id="offline-sound-press" src="https://24glo.com/img/game/dino/offline-sound-press.mp3"></audio>
			<audio id="offline-sound-hit" src="hhttps://24glo.com/img/game/dino/offline-sound-hit.mp3"></audio>
			<audio id="offline-sound-reached" src="https://24glo.com/img/game/dino/offline-sound-reached.mp3"></audio>
		</div>
		
        <script>(function(){'use strict';function Runner(outerContainerId,opt_config){if(Runner.instance_){return Runner.instance_;}
Runner.instance_=this;this.outerContainerEl=document.querySelector(outerContainerId);this.containerEl=null;this.config=opt_config||Runner.config;this.dimensions=Runner.defaultDimensions;this.canvas=null;this.canvasCtx=null;this.tRex=null;this.distanceMeter=null;this.distanceRan=0;this.highestScore=0;this.time=0;this.runningTime=0;this.msPerFrame=1000/FPS;this.currentSpeed=this.config.SPEED;this.obstacles=[];this.started=false;this.activated=false;this.crashed=false;this.paused=false;this.resizeTimerId_=null;this.playCount=0;this.audioBuffer=null;this.soundFx={};this.audioContext=null;this.images={};this.imagesLoaded=0;this.loadImages();}
window['Runner']=Runner;var DEFAULT_WIDTH=600;var FPS=60;var IS_HIDPI=window.devicePixelRatio>1;var IS_MOBILE=window.navigator.userAgent.indexOf('Mobi')>-1;var IS_TOUCH_ENABLED='ontouchstart'in window;Runner.config={ACCELERATION:0.001,BG_CLOUD_SPEED:0.2,BOTTOM_PAD:10,CLEAR_TIME:3000,CLOUD_FREQUENCY:0.5,GAMEOVER_CLEAR_TIME:750,GAP_COEFFICIENT:0.6,GRAVITY:0.6,INITIAL_JUMP_VELOCITY:12,MAX_CLOUDS:6,MAX_OBSTACLE_LENGTH:3,MAX_SPEED:12,MIN_JUMP_HEIGHT:35,MOBILE_SPEED_COEFFICIENT:1.2,RESOURCE_TEMPLATE_ID:'audio-resources',SPEED:6,SPEED_DROP_COEFFICIENT:3};Runner.defaultDimensions={WIDTH:DEFAULT_WIDTH,HEIGHT:150};Runner.classes={CANVAS:'runner-canvas',CONTAINER:'runner-container',CRASHED:'crashed',ICON:'icon-offline',TOUCH_CONTROLLER:'controller'};Runner.imageSources={LDPI:[{name:'CACTUS_LARGE',id:'1x-obstacle-large'},{name:'CACTUS_SMALL',id:'1x-obstacle-small'},{name:'CLOUD',id:'1x-cloud'},{name:'HORIZON',id:'1x-horizon'},{name:'RESTART',id:'1x-restart'},{name:'TEXT_SPRITE',id:'1x-text'},{name:'TREX',id:'1x-trex'}],HDPI:[{name:'CACTUS_LARGE',id:'2x-obstacle-large'},{name:'CACTUS_SMALL',id:'2x-obstacle-small'},{name:'CLOUD',id:'2x-cloud'},{name:'HORIZON',id:'2x-horizon'},{name:'RESTART',id:'2x-restart'},{name:'TEXT_SPRITE',id:'2x-text'},{name:'TREX',id:'2x-trex'}]};Runner.sounds={BUTTON_PRESS:'offline-sound-press',HIT:'offline-sound-hit',SCORE:'offline-sound-reached'};Runner.keycodes={JUMP:{'38':1,'32':1},DUCK:{'40':1},RESTART:{'13':1}};Runner.events={ANIM_END:'webkitAnimationEnd',CLICK:'click',KEYDOWN:'keydown',KEYUP:'keyup',MOUSEDOWN:'mousedown',MOUSEUP:'mouseup',RESIZE:'resize',TOUCHEND:'touchend',TOUCHSTART:'touchstart',VISIBILITY:'visibilitychange',BLUR:'blur',FOCUS:'focus',LOAD:'load'};Runner.prototype={updateConfigSetting:function(setting,value){if(setting in this.config&&value!=undefined){this.config[setting]=value;switch(setting){case 'GRAVITY':case 'MIN_JUMP_HEIGHT':case 'SPEED_DROP_COEFFICIENT':this.tRex.config[setting]=value;break;case 'INITIAL_JUMP_VELOCITY':this.tRex.setJumpVelocity(value);break;case 'SPEED':this.setSpeed(value);break;}}},loadImages:function(){var imageSources=IS_HIDPI?Runner.imageSources.HDPI:Runner.imageSources.LDPI;var numImages=imageSources.length;for(var i=numImages-1;i>=0;i--){var imgSource=imageSources[i];this.images[imgSource.name]=document.getElementById(imgSource.id);}
this.init();},loadSounds:function(){this.audioContext=new AudioContext();var resourceTemplate=document.getElementById(this.config.RESOURCE_TEMPLATE_ID).content;for(var sound in Runner.sounds){var soundSrc=document.getElementById(Runner.sounds[sound]);this.soundFx[sound]=soundSrc;}},setSpeed:function(opt_speed){var speed=opt_speed||this.currentSpeed;if(this.dimensions.WIDTH<DEFAULT_WIDTH){var mobileSpeed=speed*this.dimensions.WIDTH/DEFAULT_WIDTH*this.config.MOBILE_SPEED_COEFFICIENT;this.currentSpeed=mobileSpeed>speed?speed:mobileSpeed;}else if(opt_speed){this.currentSpeed=opt_speed;}},init:function(){document.querySelector('.'+Runner.classes.ICON).style.visibility='hidden';this.adjustDimensions();this.setSpeed();this.containerEl=document.createElement('div');this.containerEl.className=Runner.classes.CONTAINER;this.canvas=createCanvas(this.containerEl,this.dimensions.WIDTH,this.dimensions.HEIGHT,Runner.classes.PLAYER);this.canvasCtx=this.canvas.getContext('2d');this.canvasCtx.fillStyle='#f7f7f7';this.canvasCtx.fill();Runner.updateCanvasScaling(this.canvas);this.horizon=new Horizon(this.canvas,this.images,this.dimensions,this.config.GAP_COEFFICIENT);this.distanceMeter=new DistanceMeter(this.canvas,this.images.TEXT_SPRITE,this.dimensions.WIDTH);this.tRex=new Trex(this.canvas,this.images.TREX);this.outerContainerEl.appendChild(this.containerEl);if(IS_MOBILE){this.createTouchController();}
this.startListening();this.update();window.addEventListener(Runner.events.RESIZE,this.debounceResize.bind(this));},createTouchController:function(){this.touchController=document.createElement('div');this.touchController.className=Runner.classes.TOUCH_CONTROLLER;},debounceResize:function(){if(!this.resizeTimerId_){this.resizeTimerId_=setInterval(this.adjustDimensions.bind(this),250);}},adjustDimensions:function(){clearInterval(this.resizeTimerId_);this.resizeTimerId_=null;var boxStyles=window.getComputedStyle(this.outerContainerEl);var padding=Number(boxStyles.paddingLeft.substr(0,boxStyles.paddingLeft.length-2));this.dimensions.WIDTH=(this.outerContainerEl.offsetWidth-padding*2)>DEFAULT_WIDTH?DEFAULT_WIDTH:this.outerContainerEl.offsetWidth-padding*2;if(this.canvas){this.canvas.width=this.dimensions.WIDTH;this.canvas.height=this.dimensions.HEIGHT;Runner.updateCanvasScaling(this.canvas);this.distanceMeter.calcXPos(this.dimensions.WIDTH);this.clearCanvas();this.horizon.update(0,0,true);this.tRex.update(0);if(this.activated||this.crashed){this.containerEl.style.width=this.dimensions.WIDTH+'px';this.containerEl.style.height=this.dimensions.HEIGHT+'px';this.distanceMeter.update(0,Math.ceil(this.distanceRan));this.stop();}else{this.tRex.draw(0,0);}
if(this.crashed&&this.gameOverPanel){this.gameOverPanel.updateDimensions(this.dimensions.WIDTH);this.gameOverPanel.draw();}}},playIntro:function(){if(!this.started&&!this.crashed){this.playingIntro=true;this.tRex.playingIntro=true;var keyframes='@-webkit-keyframes intro { '+
'from { width:'+Trex.config.WIDTH+'px }'+
'to { width: '+this.dimensions.WIDTH+'px }'+
'}';document.styleSheets[1].insertRule(keyframes,0);this.containerEl.addEventListener(Runner.events.ANIM_END,this.startGame.bind(this));this.containerEl.style.webkitAnimation='intro .4s ease-out 1 both';this.containerEl.style.width=this.dimensions.WIDTH+'px';if(this.touchController){this.outerContainerEl.appendChild(this.touchController);}
this.activated=true;this.started=true;}else if(this.crashed){this.restart();}},startGame:function(){this.runningTime=0;this.playingIntro=false;this.tRex.playingIntro=false;this.containerEl.style.webkitAnimation='';this.playCount++;window.addEventListener(Runner.events.VISIBILITY,this.onVisibilityChange.bind(this));window.addEventListener(Runner.events.BLUR,this.onVisibilityChange.bind(this));window.addEventListener(Runner.events.FOCUS,this.onVisibilityChange.bind(this));},clearCanvas:function(){this.canvasCtx.clearRect(0,0,this.dimensions.WIDTH,this.dimensions.HEIGHT);},update:function(){this.drawPending=false;var now=performance.now();var deltaTime=now-(this.time||now);this.time=now;if(this.activated){this.clearCanvas();if(this.tRex.jumping){this.tRex.updateJump(deltaTime,this.config);}
this.runningTime+=deltaTime;var hasObstacles=this.runningTime>this.config.CLEAR_TIME;if(this.tRex.jumpCount==1&&!this.playingIntro){this.playIntro();}
if(this.playingIntro){this.horizon.update(0,this.currentSpeed,hasObstacles);}else{deltaTime=!this.started?0:deltaTime;this.horizon.update(deltaTime,this.currentSpeed,hasObstacles);}
var collision=hasObstacles&&checkForCollision(this.horizon.obstacles[0],this.tRex);if(!collision){this.distanceRan+=this.currentSpeed*deltaTime/this.msPerFrame;if(this.currentSpeed<this.config.MAX_SPEED){this.currentSpeed+=this.config.ACCELERATION;}}else{this.gameOver();}
if(this.distanceMeter.getActualDistance(this.distanceRan)>this.distanceMeter.maxScore){this.distanceRan=0;}
var playAcheivementSound=this.distanceMeter.update(deltaTime,Math.ceil(this.distanceRan));if(playAcheivementSound){this.playSound(this.soundFx.SCORE);}}
if(!this.crashed){this.tRex.update(deltaTime);this.raq();}},handleEvent:function(e){return(function(evtType,events){switch(evtType){case events.KEYDOWN:case events.TOUCHSTART:case events.MOUSEDOWN:this.onKeyDown(e);break;case events.KEYUP:case events.TOUCHEND:case events.MOUSEUP:this.onKeyUp(e);break;}}.bind(this))(e.type,Runner.events);},startListening:function(){document.addEventListener(Runner.events.KEYDOWN,this);document.addEventListener(Runner.events.KEYUP,this);if(IS_MOBILE){this.touchController.addEventListener(Runner.events.TOUCHSTART,this);this.touchController.addEventListener(Runner.events.TOUCHEND,this);this.containerEl.addEventListener(Runner.events.TOUCHSTART,this);}else{document.addEventListener(Runner.events.MOUSEDOWN,this);document.addEventListener(Runner.events.MOUSEUP,this);}},stopListening:function(){document.removeEventListener(Runner.events.KEYDOWN,this);document.removeEventListener(Runner.events.KEYUP,this);if(IS_MOBILE){this.touchController.removeEventListener(Runner.events.TOUCHSTART,this);this.touchController.removeEventListener(Runner.events.TOUCHEND,this);this.containerEl.removeEventListener(Runner.events.TOUCHSTART,this);}else{document.removeEventListener(Runner.events.MOUSEDOWN,this);document.removeEventListener(Runner.events.MOUSEUP,this);}},onKeyDown:function(e){if(!this.crashed&&(Runner.keycodes.JUMP[String(e.keyCode)]||e.type==Runner.events.TOUCHSTART)){if(!this.activated){this.loadSounds();this.activated=true;}
if(!this.tRex.jumping){this.playSound(this.soundFx.BUTTON_PRESS);this.tRex.startJump();}}
if(this.crashed&&e.type==Runner.events.TOUCHSTART&&e.currentTarget==this.containerEl){this.restart();}
if(Runner.keycodes.DUCK[e.keyCode]&&this.tRex.jumping){e.preventDefault();this.tRex.setSpeedDrop();}},onKeyUp:function(e){var keyCode=String(e.keyCode);var isjumpKey=Runner.keycodes.JUMP[keyCode]||e.type==Runner.events.TOUCHEND||e.type==Runner.events.MOUSEDOWN;if(this.isRunning()&&isjumpKey){this.tRex.endJump();}else if(Runner.keycodes.DUCK[keyCode]){this.tRex.speedDrop=false;}else if(this.crashed){var deltaTime=performance.now()-this.time;if(Runner.keycodes.RESTART[keyCode]||(e.type==Runner.events.MOUSEUP&&e.target==this.canvas)||(deltaTime>=this.config.GAMEOVER_CLEAR_TIME&&Runner.keycodes.JUMP[keyCode])){this.restart();}}else if(this.paused&&isjumpKey){this.play();}},raq:function(){if(!this.drawPending){this.drawPending=true;this.raqId=requestAnimationFrame(this.update.bind(this));}},isRunning:function(){return!!this.raqId;},gameOver:function(){this.playSound(this.soundFx.HIT);vibrate(200);this.stop();this.crashed=true;this.distanceMeter.acheivement=false;this.tRex.update(100,Trex.status.CRASHED);if(!this.gameOverPanel){this.gameOverPanel=new GameOverPanel(this.canvas,this.images.TEXT_SPRITE,this.images.RESTART,this.dimensions);}else{this.gameOverPanel.draw();}
if(this.distanceRan>this.highestScore){this.highestScore=Math.ceil(this.distanceRan);this.distanceMeter.setHighScore(this.highestScore);}
this.time=performance.now();},stop:function(){this.activated=false;this.paused=true;cancelAnimationFrame(this.raqId);this.raqId=0;},play:function(){if(!this.crashed){this.activated=true;this.paused=false;this.tRex.update(0,Trex.status.RUNNING);this.time=performance.now();this.update();}},restart:function(){if(!this.raqId){this.playCount++;this.runningTime=0;this.activated=true;this.crashed=false;this.distanceRan=0;this.setSpeed(this.config.SPEED);this.time=performance.now();this.containerEl.classList.remove(Runner.classes.CRASHED);this.clearCanvas();this.distanceMeter.reset(this.highestScore);this.horizon.reset();this.tRex.reset();this.playSound(this.soundFx.BUTTON_PRESS);this.update();}},onVisibilityChange:function(e){if(document.hidden||document.webkitHidden||e.type=='blur'){this.stop();}else{this.play();}},playSound:function(audioElement){if(audioElement){audioElement.play();}}};Runner.updateCanvasScaling=function(canvas,opt_width,opt_height){var context=canvas.getContext('2d');var devicePixelRatio=Math.floor(window.devicePixelRatio)||1;var backingStoreRatio=Math.floor(context.webkitBackingStorePixelRatio)||1;var ratio=devicePixelRatio/backingStoreRatio;if(devicePixelRatio!==backingStoreRatio){var oldWidth=opt_width||canvas.width;var oldHeight=opt_height||canvas.height;canvas.width=oldWidth*ratio;canvas.height=oldHeight*ratio;canvas.style.width=oldWidth+'px';canvas.style.height=oldHeight+'px';context.scale(ratio,ratio);return true;}
return false;};function getRandomNum(min,max){return Math.floor(Math.random()*(max-min+1))+min;}
function vibrate(duration){if(IS_MOBILE){window.navigator['vibrate'](duration);}}
function createCanvas(container,width,height,opt_classname){var canvas=document.createElement('canvas');canvas.className=opt_classname?Runner.classes.CANVAS+' '+
opt_classname:Runner.classes.CANVAS;canvas.width=width;canvas.height=height;container.appendChild(canvas);return canvas;}
function decodeBase64ToArrayBuffer(base64String){var len=(base64String.length/4)*3;var str=atob(base64String);var arrayBuffer=new ArrayBuffer(len);var bytes=new Uint8Array(arrayBuffer);for(var i=0;i<len;i++){bytes[i]=str.charCodeAt(i);}
return bytes.buffer;}
function GameOverPanel(canvas,textSprite,restartImg,dimensions){this.canvas=canvas;this.canvasCtx=canvas.getContext('2d');this.canvasDimensions=dimensions;this.textSprite=textSprite;this.restartImg=restartImg;this.draw();};GameOverPanel.dimensions={TEXT_X:0,TEXT_Y:13,TEXT_WIDTH:191,TEXT_HEIGHT:11,RESTART_WIDTH:36,RESTART_HEIGHT:32};GameOverPanel.prototype={updateDimensions:function(width,opt_height){this.canvasDimensions.WIDTH=width;if(opt_height){this.canvasDimensions.HEIGHT=opt_height;}},draw:function(){var dimensions=GameOverPanel.dimensions;var centerX=this.canvasDimensions.WIDTH/2;var textSourceX=dimensions.TEXT_X;var textSourceY=dimensions.TEXT_Y;var textSourceWidth=dimensions.TEXT_WIDTH;var textSourceHeight=dimensions.TEXT_HEIGHT;var textTargetX=Math.round(centerX-(dimensions.TEXT_WIDTH/2));var textTargetY=Math.round((this.canvasDimensions.HEIGHT-25)/3);var textTargetWidth=dimensions.TEXT_WIDTH;var textTargetHeight=dimensions.TEXT_HEIGHT;var restartSourceWidth=dimensions.RESTART_WIDTH;var restartSourceHeight=dimensions.RESTART_HEIGHT;var restartTargetX=centerX-(dimensions.RESTART_WIDTH/2);var restartTargetY=this.canvasDimensions.HEIGHT/2;if(IS_HIDPI){textSourceY*=2;textSourceX*=2;textSourceWidth*=2;textSourceHeight*=2;restartSourceWidth*=2;restartSourceHeight*=2;}
this.canvasCtx.drawImage(this.textSprite,textSourceX,textSourceY,textSourceWidth,textSourceHeight,textTargetX,textTargetY,textTargetWidth,textTargetHeight);this.canvasCtx.drawImage(this.restartImg,0,0,restartSourceWidth,restartSourceHeight,restartTargetX,restartTargetY,dimensions.RESTART_WIDTH,dimensions.RESTART_HEIGHT);}};function checkForCollision(obstacle,tRex,opt_canvasCtx){var obstacleBoxXPos=Runner.defaultDimensions.WIDTH+obstacle.xPos;var tRexBox=new CollisionBox(tRex.xPos+1,tRex.yPos+1,tRex.config.WIDTH-2,tRex.config.HEIGHT-2);var obstacleBox=new CollisionBox(obstacle.xPos+1,obstacle.yPos+1,obstacle.typeConfig.width*obstacle.size-2,obstacle.typeConfig.height-2);if(opt_canvasCtx){drawCollisionBoxes(opt_canvasCtx,tRexBox,obstacleBox);}
if(boxCompare(tRexBox,obstacleBox)){var collisionBoxes=obstacle.collisionBoxes;var tRexCollisionBoxes=Trex.collisionBoxes;for(var t=0;t<tRexCollisionBoxes.length;t++){for(var i=0;i<collisionBoxes.length;i++){var adjTrexBox=createAdjustedCollisionBox(tRexCollisionBoxes[t],tRexBox);var adjObstacleBox=createAdjustedCollisionBox(collisionBoxes[i],obstacleBox);var crashed=boxCompare(adjTrexBox,adjObstacleBox);if(opt_canvasCtx){drawCollisionBoxes(opt_canvasCtx,adjTrexBox,adjObstacleBox);}
if(crashed){return[adjTrexBox,adjObstacleBox];}}}}
return false;};function createAdjustedCollisionBox(box,adjustment){return new CollisionBox(box.x+adjustment.x,box.y+adjustment.y,box.width,box.height);};function drawCollisionBoxes(canvasCtx,tRexBox,obstacleBox){canvasCtx.save();canvasCtx.strokeStyle='#f00';canvasCtx.strokeRect(tRexBox.x,tRexBox.y,tRexBox.width,tRexBox.height);canvasCtx.strokeStyle='#0f0';canvasCtx.strokeRect(obstacleBox.x,obstacleBox.y,obstacleBox.width,obstacleBox.height);canvasCtx.restore();};function boxCompare(tRexBox,obstacleBox){var crashed=false;var tRexBoxX=tRexBox.x;var tRexBoxY=tRexBox.y;var obstacleBoxX=obstacleBox.x;var obstacleBoxY=obstacleBox.y;if(tRexBox.x<obstacleBoxX+obstacleBox.width&&tRexBox.x+tRexBox.width>obstacleBoxX&&tRexBox.y<obstacleBox.y+obstacleBox.height&&tRexBox.height+tRexBox.y>obstacleBox.y){crashed=true;}
return crashed;};function CollisionBox(x,y,w,h){this.x=x;this.y=y;this.width=w;this.height=h;};function Obstacle(canvasCtx,type,obstacleImg,dimensions,gapCoefficient,speed){this.canvasCtx=canvasCtx;this.image=obstacleImg;this.typeConfig=type;this.gapCoefficient=gapCoefficient;this.size=getRandomNum(1,Obstacle.MAX_OBSTACLE_LENGTH);this.dimensions=dimensions;this.remove=false;this.xPos=0;this.yPos=this.typeConfig.yPos;this.width=0;this.collisionBoxes=[];this.gap=0;this.init(speed);};Obstacle.MAX_GAP_COEFFICIENT=1.5;Obstacle.MAX_OBSTACLE_LENGTH=3,Obstacle.prototype={init:function(speed){this.cloneCollisionBoxes();if(this.size>1&&this.typeConfig.multipleSpeed>speed){this.size=1;}
this.width=this.typeConfig.width*this.size;this.xPos=this.dimensions.WIDTH-this.width;this.draw();if(this.size>1){this.collisionBoxes[1].width=this.width-this.collisionBoxes[0].width-
this.collisionBoxes[2].width;this.collisionBoxes[2].x=this.width-this.collisionBoxes[2].width;}
this.gap=this.getGap(this.gapCoefficient,speed);},draw:function(){var sourceWidth=this.typeConfig.width;var sourceHeight=this.typeConfig.height;if(IS_HIDPI){sourceWidth=sourceWidth*2;sourceHeight=sourceHeight*2;}
var sourceX=(sourceWidth*this.size)*(0.5*(this.size-1));this.canvasCtx.drawImage(this.image,sourceX,0,sourceWidth*this.size,sourceHeight,this.xPos,this.yPos,this.typeConfig.width*this.size,this.typeConfig.height);},update:function(deltaTime,speed){if(!this.remove){this.xPos-=Math.floor((speed*FPS/1000)*deltaTime);this.draw();if(!this.isVisible()){this.remove=true;}}},getGap:function(gapCoefficient,speed){var minGap=Math.round(this.width*speed+
this.typeConfig.minGap*gapCoefficient);var maxGap=Math.round(minGap*Obstacle.MAX_GAP_COEFFICIENT);return getRandomNum(minGap,maxGap);},isVisible:function(){return this.xPos+this.width>0;},cloneCollisionBoxes:function(){var collisionBoxes=this.typeConfig.collisionBoxes;for(var i=collisionBoxes.length-1;i>=0;i--){this.collisionBoxes[i]=new CollisionBox(collisionBoxes[i].x,collisionBoxes[i].y,collisionBoxes[i].width,collisionBoxes[i].height);}}};Obstacle.types=[{type:'CACTUS_SMALL',className:' cactus cactus-small ',width:17,height:35,yPos:105,multipleSpeed:3,minGap:120,collisionBoxes:[new CollisionBox(0,7,5,27),new CollisionBox(4,0,6,34),new CollisionBox(10,4,7,14)]},{type:'CACTUS_LARGE',className:' cactus cactus-large ',width:25,height:50,yPos:90,multipleSpeed:6,minGap:120,collisionBoxes:[new CollisionBox(0,12,7,38),new CollisionBox(8,0,7,49),new CollisionBox(13,10,10,38)]}];function Trex(canvas,image){this.canvas=canvas;this.canvasCtx=canvas.getContext('2d');this.image=image;this.xPos=0;this.yPos=0;this.groundYPos=0;this.currentFrame=0;this.currentAnimFrames=[];this.blinkDelay=0;this.animStartTime=0;this.timer=0;this.msPerFrame=1000/FPS;this.config=Trex.config;this.status=Trex.status.WAITING;this.jumping=false;this.jumpVelocity=0;this.reachedMinHeight=false;this.speedDrop=false;this.jumpCount=0;this.jumpspotX=0;this.init();};Trex.config={DROP_VELOCITY:-5,GRAVITY:0.6,HEIGHT:47,INIITAL_JUMP_VELOCITY:-10,INTRO_DURATION:1500,MAX_JUMP_HEIGHT:30,MIN_JUMP_HEIGHT:30,SPEED_DROP_COEFFICIENT:3,SPRITE_WIDTH:262,START_X_POS:50,WIDTH:44};Trex.collisionBoxes=[new CollisionBox(1,-1,30,26),new CollisionBox(32,0,8,16),new CollisionBox(10,35,14,8),new CollisionBox(1,24,29,5),new CollisionBox(5,30,21,4),new CollisionBox(9,34,15,4)];Trex.status={CRASHED:'CRASHED',JUMPING:'JUMPING',RUNNING:'RUNNING',WAITING:'WAITING'};Trex.BLINK_TIMING=7000;Trex.animFrames={WAITING:{frames:[44,0],msPerFrame:1000/3},RUNNING:{frames:[88,132],msPerFrame:1000/12},CRASHED:{frames:[220],msPerFrame:1000/60},JUMPING:{frames:[0],msPerFrame:1000/60}};Trex.prototype={init:function(){this.blinkDelay=this.setBlinkDelay();this.groundYPos=Runner.defaultDimensions.HEIGHT-this.config.HEIGHT-
Runner.config.BOTTOM_PAD;this.yPos=this.groundYPos;this.minJumpHeight=this.groundYPos-this.config.MIN_JUMP_HEIGHT;this.draw(0,0);this.update(0,Trex.status.WAITING);},setJumpVelocity:function(setting){this.config.INIITAL_JUMP_VELOCITY=-setting;this.config.DROP_VELOCITY=-setting/2;},update:function(deltaTime,opt_status){this.timer+=deltaTime;if(opt_status){this.status=opt_status;this.currentFrame=0;this.msPerFrame=Trex.animFrames[opt_status].msPerFrame;this.currentAnimFrames=Trex.animFrames[opt_status].frames;if(opt_status==Trex.status.WAITING){this.animStartTime=performance.now();this.setBlinkDelay();}}
if(this.playingIntro&&this.xPos<this.config.START_X_POS){this.xPos+=Math.round((this.config.START_X_POS/this.config.INTRO_DURATION)*deltaTime);}
if(this.status==Trex.status.WAITING){this.blink(performance.now());}else{this.draw(this.currentAnimFrames[this.currentFrame],0);}
if(this.timer>=this.msPerFrame){this.currentFrame=this.currentFrame==this.currentAnimFrames.length-1?0:this.currentFrame+1;this.timer=0;}},draw:function(x,y){var sourceX=x;var sourceY=y;var sourceWidth=this.config.WIDTH;var sourceHeight=this.config.HEIGHT;if(IS_HIDPI){sourceX*=2;sourceY*=2;sourceWidth*=2;sourceHeight*=2;}
this.canvasCtx.drawImage(this.image,sourceX,sourceY,sourceWidth,sourceHeight,this.xPos,this.yPos,this.config.WIDTH,this.config.HEIGHT);},setBlinkDelay:function(){this.blinkDelay=Math.ceil(Math.random()*Trex.BLINK_TIMING);},blink:function(time){var deltaTime=time-this.animStartTime;if(deltaTime>=this.blinkDelay){this.draw(this.currentAnimFrames[this.currentFrame],0);if(this.currentFrame==1){this.setBlinkDelay();this.animStartTime=time;}}},startJump:function(){if(!this.jumping){this.update(0,Trex.status.JUMPING);this.jumpVelocity=this.config.INIITAL_JUMP_VELOCITY;this.jumping=true;this.reachedMinHeight=false;this.speedDrop=false;}},endJump:function(){if(this.reachedMinHeight&&this.jumpVelocity<this.config.DROP_VELOCITY){this.jumpVelocity=this.config.DROP_VELOCITY;}},updateJump:function(deltaTime){var msPerFrame=Trex.animFrames[this.status].msPerFrame;var framesElapsed=deltaTime/msPerFrame;if(this.speedDrop){this.yPos+=Math.round(this.jumpVelocity*this.config.SPEED_DROP_COEFFICIENT*framesElapsed);}else{this.yPos+=Math.round(this.jumpVelocity*framesElapsed);}
this.jumpVelocity+=this.config.GRAVITY*framesElapsed;if(this.yPos<this.minJumpHeight||this.speedDrop){this.reachedMinHeight=true;}
if(this.yPos<this.config.MAX_JUMP_HEIGHT||this.speedDrop){this.endJump();}
if(this.yPos>this.groundYPos){this.reset();this.jumpCount++;}
this.update(deltaTime);},setSpeedDrop:function(){this.speedDrop=true;this.jumpVelocity=1;},reset:function(){this.yPos=this.groundYPos;this.jumpVelocity=0;this.jumping=false;this.update(0,Trex.status.RUNNING);this.midair=false;this.speedDrop=false;this.jumpCount=0;}};function DistanceMeter(canvas,spriteSheet,canvasWidth){this.canvas=canvas;this.canvasCtx=canvas.getContext('2d');this.image=spriteSheet;this.x=0;this.y=5;this.currentDistance=0;this.maxScore=0;this.highScore=0;this.container=null;this.digits=[];this.acheivement=false;this.defaultString='';this.flashTimer=0;this.flashIterations=0;this.config=DistanceMeter.config;this.init(canvasWidth);};DistanceMeter.dimensions={WIDTH:10,HEIGHT:13,DEST_WIDTH:11};DistanceMeter.yPos=[0,13,27,40,53,67,80,93,107,120];DistanceMeter.config={MAX_DISTANCE_UNITS:5,ACHIEVEMENT_DISTANCE:100,COEFFICIENT:0.025,FLASH_DURATION:1000/4,FLASH_ITERATIONS:3};DistanceMeter.prototype={init:function(width){var maxDistanceStr='';this.calcXPos(width);this.maxScore=this.config.MAX_DISTANCE_UNITS;for(var i=0;i<this.config.MAX_DISTANCE_UNITS;i++){this.draw(i,0);this.defaultString+='0';maxDistanceStr+='9';}
this.maxScore=parseInt(maxDistanceStr);},calcXPos:function(canvasWidth){this.x=canvasWidth-(DistanceMeter.dimensions.DEST_WIDTH*(this.config.MAX_DISTANCE_UNITS+1));},draw:function(digitPos,value,opt_highScore){var sourceWidth=DistanceMeter.dimensions.WIDTH;var sourceHeight=DistanceMeter.dimensions.HEIGHT;var sourceX=DistanceMeter.dimensions.WIDTH*value;var targetX=digitPos*DistanceMeter.dimensions.DEST_WIDTH;var targetY=this.y;var targetWidth=DistanceMeter.dimensions.WIDTH;var targetHeight=DistanceMeter.dimensions.HEIGHT;if(IS_HIDPI){sourceWidth*=2;sourceHeight*=2;sourceX*=2;}
this.canvasCtx.save();if(opt_highScore){var highScoreX=this.x-(this.config.MAX_DISTANCE_UNITS*2)*DistanceMeter.dimensions.WIDTH;this.canvasCtx.translate(highScoreX,this.y);}else{this.canvasCtx.translate(this.x,this.y);}
this.canvasCtx.drawImage(this.image,sourceX,0,sourceWidth,sourceHeight,targetX,targetY,targetWidth,targetHeight);this.canvasCtx.restore();},getActualDistance:function(distance){return distance?Math.round(distance*this.config.COEFFICIENT):0;},update:function(deltaTime,distance){var paint=true;var playSound=false;if(!this.acheivement){distance=this.getActualDistance(distance);if(distance>0){if(distance%this.config.ACHIEVEMENT_DISTANCE==0){this.acheivement=true;this.flashTimer=0;playSound=true;}
var distanceStr=(this.defaultString+
distance).substr(-this.config.MAX_DISTANCE_UNITS);this.digits=distanceStr.split('');}else{this.digits=this.defaultString.split('');}}else{if(this.flashIterations<=this.config.FLASH_ITERATIONS){this.flashTimer+=deltaTime;if(this.flashTimer<this.config.FLASH_DURATION){paint=false;}else if(this.flashTimer>this.config.FLASH_DURATION*2){this.flashTimer=0;this.flashIterations++;}}else{this.acheivement=false;this.flashIterations=0;this.flashTimer=0;}}
if(paint){for(var i=this.digits.length-1;i>=0;i--){this.draw(i,parseInt(this.digits[i]));}}
this.drawHighScore();return playSound;},drawHighScore:function(){this.canvasCtx.save();this.canvasCtx.globalAlpha=.8;for(var i=this.highScore.length-1;i>=0;i--){this.draw(i,parseInt(this.highScore[i],10),true);}
this.canvasCtx.restore();},setHighScore:function(distance){distance=this.getActualDistance(distance);var highScoreStr=(this.defaultString+
distance).substr(-this.config.MAX_DISTANCE_UNITS);this.highScore=['10','11',''].concat(highScoreStr.split(''));},reset:function(){this.update(0);this.acheivement=false;}};function Cloud(canvas,cloudImg,containerWidth){this.canvas=canvas;this.canvasCtx=this.canvas.getContext('2d');this.image=cloudImg;this.containerWidth=containerWidth;this.xPos=containerWidth;this.yPos=0;this.remove=false;this.cloudGap=getRandomNum(Cloud.config.MIN_CLOUD_GAP,Cloud.config.MAX_CLOUD_GAP);this.init();};Cloud.config={HEIGHT:13,MAX_CLOUD_GAP:400,MAX_SKY_LEVEL:30,MIN_CLOUD_GAP:100,MIN_SKY_LEVEL:71,WIDTH:46};Cloud.prototype={init:function(){this.yPos=getRandomNum(Cloud.config.MAX_SKY_LEVEL,Cloud.config.MIN_SKY_LEVEL);this.draw();},draw:function(){this.canvasCtx.save();var sourceWidth=Cloud.config.WIDTH;var sourceHeight=Cloud.config.HEIGHT;if(IS_HIDPI){sourceWidth=sourceWidth*2;sourceHeight=sourceHeight*2;}
this.canvasCtx.drawImage(this.image,0,0,sourceWidth,sourceHeight,this.xPos,this.yPos,Cloud.config.WIDTH,Cloud.config.HEIGHT);this.canvasCtx.restore();},update:function(speed){if(!this.remove){this.xPos-=Math.ceil(speed);this.draw();if(!this.isVisible()){this.remove=true;}}},isVisible:function(){return this.xPos+Cloud.config.WIDTH>0;}};function HorizonLine(canvas,bgImg){this.image=bgImg;this.canvas=canvas;this.canvasCtx=canvas.getContext('2d');this.sourceDimensions={};this.dimensions=HorizonLine.dimensions;this.sourceXPos=[0,this.dimensions.WIDTH];this.xPos=[];this.yPos=0;this.bumpThreshold=0.5;this.setSourceDimensions();this.draw();};HorizonLine.dimensions={WIDTH:600,HEIGHT:12,YPOS:127};HorizonLine.prototype={setSourceDimensions:function(){for(var dimension in HorizonLine.dimensions){if(IS_HIDPI){if(dimension!='YPOS'){this.sourceDimensions[dimension]=HorizonLine.dimensions[dimension]*2;}}else{this.sourceDimensions[dimension]=HorizonLine.dimensions[dimension];}
this.dimensions[dimension]=HorizonLine.dimensions[dimension];}
this.xPos=[0,HorizonLine.dimensions.WIDTH];this.yPos=HorizonLine.dimensions.YPOS;},getRandomType:function(){return Math.random()>this.bumpThreshold?this.dimensions.WIDTH:0;},draw:function(){this.canvasCtx.drawImage(this.image,this.sourceXPos[0],0,this.sourceDimensions.WIDTH,this.sourceDimensions.HEIGHT,this.xPos[0],this.yPos,this.dimensions.WIDTH,this.dimensions.HEIGHT);this.canvasCtx.drawImage(this.image,this.sourceXPos[1],0,this.sourceDimensions.WIDTH,this.sourceDimensions.HEIGHT,this.xPos[1],this.yPos,this.dimensions.WIDTH,this.dimensions.HEIGHT);},updateXPos:function(pos,increment){var line1=pos;var line2=pos==0?1:0;this.xPos[line1]-=increment;this.xPos[line2]=this.xPos[line1]+this.dimensions.WIDTH;if(this.xPos[line1]<=-this.dimensions.WIDTH){this.xPos[line1]+=this.dimensions.WIDTH*2;this.xPos[line2]=this.xPos[line1]-this.dimensions.WIDTH;this.sourceXPos[line1]=this.getRandomType();}},update:function(deltaTime,speed){var increment=Math.floor(speed*(FPS/1000)*deltaTime);if(this.xPos[0]<=0){this.updateXPos(0,increment);}else{this.updateXPos(1,increment);}
this.draw();},reset:function(){this.xPos[0]=0;this.xPos[1]=HorizonLine.dimensions.WIDTH;}};function Horizon(canvas,images,dimensions,gapCoefficient){this.canvas=canvas;this.canvasCtx=this.canvas.getContext('2d');this.config=Horizon.config;this.dimensions=dimensions;this.gapCoefficient=gapCoefficient;this.obstacles=[];this.horizonOffsets=[0,0];this.cloudFrequency=this.config.CLOUD_FREQUENCY;this.clouds=[];this.cloudImg=images.CLOUD;this.cloudSpeed=this.config.BG_CLOUD_SPEED;this.horizonImg=images.HORIZON;this.horizonLine=null;this.obstacleImgs={CACTUS_SMALL:images.CACTUS_SMALL,CACTUS_LARGE:images.CACTUS_LARGE};this.init();};Horizon.config={BG_CLOUD_SPEED:0.2,BUMPY_THRESHOLD:.3,CLOUD_FREQUENCY:.5,HORIZON_HEIGHT:16,MAX_CLOUDS:6};Horizon.prototype={init:function(){this.addCloud();this.horizonLine=new HorizonLine(this.canvas,this.horizonImg);},update:function(deltaTime,currentSpeed,updateObstacles){this.runningTime+=deltaTime;this.horizonLine.update(deltaTime,currentSpeed);this.updateClouds(deltaTime,currentSpeed);if(updateObstacles){this.updateObstacles(deltaTime,currentSpeed);}},updateClouds:function(deltaTime,speed){var cloudSpeed=this.cloudSpeed/1000*deltaTime*speed;var numClouds=this.clouds.length;if(numClouds){for(var i=numClouds-1;i>=0;i--){this.clouds[i].update(cloudSpeed);}
var lastCloud=this.clouds[numClouds-1];if(numClouds<this.config.MAX_CLOUDS&&(this.dimensions.WIDTH-lastCloud.xPos)>lastCloud.cloudGap&&this.cloudFrequency>Math.random()){this.addCloud();}
this.clouds=this.clouds.filter(function(obj){return!obj.remove;});}},updateObstacles:function(deltaTime,currentSpeed){var updatedObstacles=this.obstacles.slice(0);for(var i=0;i<this.obstacles.length;i++){var obstacle=this.obstacles[i];obstacle.update(deltaTime,currentSpeed);if(obstacle.remove){updatedObstacles.shift();}}
this.obstacles=updatedObstacles;if(this.obstacles.length>0){var lastObstacle=this.obstacles[this.obstacles.length-1];if(lastObstacle&&!lastObstacle.followingObstacleCreated&&lastObstacle.isVisible()&&(lastObstacle.xPos+lastObstacle.width+lastObstacle.gap)<this.dimensions.WIDTH){this.addNewObstacle(currentSpeed);lastObstacle.followingObstacleCreated=true;}}else{this.addNewObstacle(currentSpeed);}},addNewObstacle:function(currentSpeed){var obstacleTypeIndex=getRandomNum(0,Obstacle.types.length-1);var obstacleType=Obstacle.types[obstacleTypeIndex];var obstacleImg=this.obstacleImgs[obstacleType.type];this.obstacles.push(new Obstacle(this.canvasCtx,obstacleType,obstacleImg,this.dimensions,this.gapCoefficient,currentSpeed));},reset:function(){this.obstacles=[];this.horizonLine.reset();},resize:function(width,height){this.canvas.width=width;this.canvas.height=height;},addCloud:function(){this.clouds.push(new Cloud(this.canvas,this.cloudImg,this.dimensions.WIDTH));}};})();new Runner('.interstitial-wrapper');</script>
        <script>document.getElementById("botStatus").addEventListener("change", function() {
	if (this.checked === true) {
		// Activate bot
		var INTERVAL = 2;
		window.tRexBot = setInterval(function() {
		    var tRex = Runner.instance_.tRex;
		    var obstacles = Runner.instance_.horizon.obstacles;
		    if (!tRex.jumping && (obstacles.length > 0) && (obstacles[0].xPos + obstacles[0].width) <= ((parseInt(Runner.instance_.currentSpeed - 0.1) - 5) * 34 + 160) && (obstacles[0].xPos + obstacles[0].width) > 20) {
		        // console.log(obstacles[0].xPos + obstacles[0].width + " | " + ((parseInt(Runner.instance_.currentSpeed - 0.1) - 5) * 34 + 160));
		        tRex.startJump();
		    }
		}, INTERVAL);
	}
	else {
		// Disable bot
		clearInterval(tRexBot);
	}
});</script>
		<script>
		var originTitle = "T-Rex Run! - Chrome Dinosaur Game";
		var botTitle = "T-Rex Game Hack! - Chrome Dinosaur Game";
      var botStatusRadio = document.getElementById("botStatus");
		if(window.location.search === "?bot"){
      botStatusRadio.checked = "checked";
      onBotStatusChange();  
    }
		document.getElementById("botStatus").addEventListener("change", onBotStatusChange);
    function onBotStatusChange() {
      botStatusRadio.blur();
			if (botStatusRadio.checked === true) {
				botStatusRadio.nextSibling.nextSibling.innerText = "Bot Activated!";
				document.title = botTitle;
				//pushstate
				history.pushState(null, null, "/"+currPage+"/?bot");
				// Activate bot
				var INTERVAL = 2;
				window.tRexBot = setInterval(function() {
					var tRex = Runner.instance_.tRex;
					var obstacles = Runner.instance_.horizon.obstacles;
					if (!tRex.jumping && (obstacles.length > 0) && (obstacles[0].xPos + obstacles[0].width) <= ((parseInt(Runner.instance_.currentSpeed - 0.1) - 5) * 34 + 160) && (obstacles[0].xPos + obstacles[0].width) > 20) {
						// console.log(obstacles[0].xPos + obstacles[0].width + " | " + ((parseInt(Runner.instance_.currentSpeed - 0.1) - 5) * 34 + 160));
						tRex.startJump();
					}
				}, INTERVAL);
			}
			else {
				botStatusRadio.nextSibling.nextSibling.innerText = "Activate Bot?";
				document.title = originTitle;
				// Disable bot
				history.pushState(null, null, "/"+currPage+"/");
				clearInterval(tRexBot);
			}
		}
		</script>
    </body>
</html>
